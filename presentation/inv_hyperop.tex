\begin{frame}[fragile]
\frametitle{The Inverse Hyperoperation Hierarchy}
The inverse hyperoperations, written $a\angle{n}b$, are defined as:
\begin{equation*}
a\angle{n}b \; \triangleq \; \begin{cases}
b - 1 & \text{ if } n = 0 \\
\cdt{a\angle{n-1}}{a_n}(b) & \text{ if } n \ge 1
\end{cases}
\quad \text{ where } \ a_n = \begin{cases}
a & \hspace{-7pt}\text{ if } n = 1 \\
0 & \hspace{-7pt}\text{ if } n = 2 \\
1 & \hspace{-7pt}\text{ if } n \ge 3
\end{cases}
\end{equation*}
% linked by A
\begin{lstlisting}
`\href{https://github.com/inv-ack/inv-ack/blob/7270e64a2600b771f2b1b1b151f7d13fb2ae6c97/applications.v#L28-L33}{Fixpoint inv\_hyperop}` (a n b : nat) : nat :=
  match n with 0 => b - 1 | S n' =>
    countdown_to (hyperop_init a n') (inv_hyperop a n') b
  end.
\end{lstlisting}

\smallskip

Interesting individual levels:
$\href{https://github.com/inv-ack/inv-ack/blob/7270e64a2600b771f2b1b1b151f7d13fb2ae6c97/applications.v#L102-L113}{a\angle{2}b}
= \left\lceil b/a \right\rceil$,
$\href{https://github.com/inv-ack/inv-ack/blob/7270e64a2600b771f2b1b1b151f7d13fb2ae6c97/applications.v#L115-L124}{a\angle{3}b}
= \left\lceil \log_a b \right\rceil$, and
$\href{https://github.com/inv-ack/inv-ack/blob/7270e64a2600b771f2b1b1b151f7d13fb2ae6c97/applications.v#L126-L128}{a\angle{4}b}
= \log^*_a b$ (not currently in Coq Standard Library).
\end{frame}


\begin{frame}[fragile]
\frametitle{The Inverse Ackermann Hierarchy}
\pause
\textbf{Naive approach.} $\Ack_{i+1} = \rf{\big(\Ack_i\big)}{{\color<4>{red} \Ack_i(1)}}\ $.
\pause
Thus $\alpha_{i+1} \triangleq \cdt{\big(\alpha_i\big)}{{\color<4>{red} \Ack_i(1)}}\ $?\\ 

\smallskip

\pause
\textcolor{red}{\textbf{Flaw!}} $\alpha_{i+1}$ depends on {\color{red}$\Ack_i$}.

\bigskip

\textbf{Observation.} $\Ack_{i+1}(n) = \Ack_i^{(n)}(\Ack_i(1)) = \Ack_i^{(n+1)}(1)$. Thus
\vspace{-0.7em}
\begin{equation*}
\begin{aligned}
\alpha_{i+1}(n) & = \min\left\{m : n\le \Ack_i^{m+1}(1)\right\}
= \min\left\{m : \big( \alpha_i \big)^{(m+1)}(n)\le 1\right\} \\
& = \min\left\{m : \big( \alpha_i \big)^{(m)}\big(\alpha_i(n)\big)\le 1\right\} = \cdt{\big(\alpha_i\big)}{1}\big(\alpha_i(n)\big)
\end{aligned}
\end{equation*}
\textbf{Redefine:}
$
\alpha_i \triangleq
\begin{cases}
\lambda n.(n - 1) & \text{when } i = 0
\\ \big(\cdt{\alpha_{i-1}}{1}\big)\circ \alpha_{i-1} & \text{when } i\ge 1
\end{cases}.
$

\smallskip

% Linked by A
\begin{lstlisting}
`\href{https://github.com/inv-ack/inv-ack/blob/7270e64a2600b771f2b1b1b151f7d13fb2ae6c97/inv_ack.v#L37-L41}{Fixpoint alpha}` (m x : nat) : nat :=
  match m with 0 => x - 1 | S m' =>
    countdown_to 1 (alpha m') (alpha m' x)
end.
\end{lstlisting}
\end{frame}